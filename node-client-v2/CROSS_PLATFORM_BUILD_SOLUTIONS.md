# RocketMQ Native SDK - è·¨å¹³å°æ„å»ºè§£å†³æ–¹æ¡ˆ

## ğŸ” é—®é¢˜åˆ†æ

### ä¸ºä»€ä¹ˆä¸èƒ½åƒGoä¸€æ ·ç®€å•äº¤å‰ç¼–è¯‘ï¼Ÿ

1. **Go CGOé™åˆ¶** âŒ
   - æˆ‘ä»¬çš„Goä»£ç ä½¿ç”¨äº†CGO (`import "C"`)
   - CGOéœ€è¦ç›®æ ‡å¹³å°çš„Cç¼–è¯‘å™¨å’Œç³»ç»Ÿåº“
   - `GOOS=linux GOARCH=amd64` åœ¨macOSä¸Šå¤±è´¥ï¼Œå› ä¸ºç¼ºå°‘Linuxçš„ç³»ç»Ÿè°ƒç”¨

2. **Node.js Native Addoné™åˆ¶** âŒ
   - node-gypéœ€è¦ç›®æ ‡å¹³å°çš„Node.jså¤´æ–‡ä»¶
   - éœ€è¦ç›®æ ‡å¹³å°çš„Pythonå’Œæ„å»ºå·¥å…·é“¾
   - äºŒè¿›åˆ¶æ–‡ä»¶ä¸å¹³å°å¼ºç»‘å®š

## ğŸš€ å¯è¡Œçš„è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: GitHub Actions (æ¨è) â­â­â­â­â­

**ä¼˜åŠ¿**:
- âœ… å®Œå…¨è‡ªåŠ¨åŒ–
- âœ… æ”¯æŒæ‰€æœ‰ä¸»æµå¹³å°
- âœ… å…è´¹ä¸”å¯é 
- âœ… å·²ç»å®ç°

**ä½¿ç”¨æ–¹æ³•**:
```bash
# 1. æ¨é€ä»£ç è§¦å‘æ„å»º
git push origin main

# 2. æˆ–åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
git tag v2.0.1
git push origin v2.0.1

# 3. ä¸‹è½½æ„å»ºäº§ç‰©
# ä»GitHub Actionsé¡µé¢ä¸‹è½½ rocketmq-native-sdk-prebuilds
```

**æ„å»ºçŸ©é˜µ**:
- macOS (Intel + ARM64)
- Linux (x64 + ARM64) 
- Windows (x64)

### æ–¹æ¡ˆ2: Dockeräº¤å‰ç¼–è¯‘ â­â­â­â­

**ä¼˜åŠ¿**:
- âœ… æœ¬åœ°å¯æ§
- âœ… æ”¯æŒLinuxå’ŒWindows
- âœ… ä¸€è‡´çš„æ„å»ºç¯å¢ƒ

**ä½¿ç”¨æ–¹æ³•**:
```bash
# æ„å»ºLinux x64
npm run docker:build:linux

# æ„å»ºLinux ARM64  
npm run docker:build:linux-arm

# æ„å»ºæ‰€æœ‰Dockeræ”¯æŒçš„å¹³å°
npm run docker:build:all
```

**é™åˆ¶**:
- éœ€è¦Docker Desktop
- macOSæ„å»ºä»éœ€åœ¨macOSä¸Šè¿›è¡Œ

### æ–¹æ¡ˆ3: äº‘æ„å»ºæœåŠ¡ â­â­â­

**é€‰é¡¹**:
- GitHub Actions (å·²å®ç°)
- GitLab CI
- Azure DevOps
- CircleCI

### æ–¹æ¡ˆ4: æœ¬åœ°è™šæ‹Ÿæœº â­â­

**é€‚ç”¨åœºæ™¯**:
- éœ€è¦å®Œå…¨ç¦»çº¿æ„å»º
- ç‰¹æ®Šçš„æ„å»ºéœ€æ±‚

**è®¾ç½®**:
- VMware/VirtualBoxè¿è¡ŒLinux/Windows
- åœ¨å„è™šæ‹Ÿæœºä¸­åˆ†åˆ«æ„å»º

## ğŸ¯ æ¨èçš„å·¥ä½œæµç¨‹

### å¼€å‘é˜¶æ®µ
```bash
# 1. æœ¬åœ°å¼€å‘å’Œæµ‹è¯• (å½“å‰å¹³å°)
npm run build:platforms        # æ„å»ºå½“å‰å¹³å°
npm run example:health         # æµ‹è¯•åŠŸèƒ½

# 2. æäº¤ä»£ç 
git add .
git commit -m "feat: æ–°åŠŸèƒ½"
git push origin develop
```

### å‘å¸ƒé˜¶æ®µ
```bash
# 1. åˆ›å»ºå‘å¸ƒåˆ†æ”¯
git checkout -b release/v2.0.1

# 2. æ›´æ–°ç‰ˆæœ¬å·
npm version 2.0.1

# 3. æ¨é€è§¦å‘GitHub Actions
git push origin release/v2.0.1

# 4. ç­‰å¾…æ‰€æœ‰å¹³å°æ„å»ºå®Œæˆ
# 5. ä¸‹è½½æ„å»ºäº§ç‰©åˆ° prebuilds/

# 6. éªŒè¯å’Œå‘å¸ƒ
npm run release:prepare
npm publish
```

## ğŸ”§ å½“å‰å¯ç”¨çš„æ„å»ºæ–¹æ³•

### 1. å½“å‰å¹³å°æ„å»º âœ…
```bash
npm run build:platforms        # æ„å»ºå½“å‰å¹³å° (darwin-arm64)
```

### 2. GitHub Actions âœ…
- è‡ªåŠ¨è§¦å‘ï¼šæ¨é€åˆ°main/developåˆ†æ”¯
- æ‰‹åŠ¨è§¦å‘ï¼šGitHubç½‘é¡µæ“ä½œ
- ç‰ˆæœ¬å‘å¸ƒï¼šåˆ›å»ºgitæ ‡ç­¾

### 3. Dockeræ„å»º âœ… (æ–°å¢)
```bash
npm run docker:build:linux     # Linux x64
npm run docker:build:linux-arm # Linux ARM64
npm run docker:build:all       # æ‰€æœ‰Dockeræ”¯æŒçš„å¹³å°
```

## ğŸ“Š å„æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | è‡ªåŠ¨åŒ– | æˆæœ¬ | å¯é æ€§ | è®¾ç½®å¤æ‚åº¦ | æ”¯æŒå¹³å° |
|------|--------|------|--------|------------|----------|
| GitHub Actions | â­â­â­â­â­ | å…è´¹ | â­â­â­â­â­ | â­â­ | 5ä¸ªå¹³å° |
| Docker | â­â­â­â­ | å…è´¹ | â­â­â­â­ | â­â­â­ | 3ä¸ªå¹³å° |
| äº‘æœåŠ¡ | â­â­â­â­â­ | ä»˜è´¹ | â­â­â­â­â­ | â­â­â­ | 5ä¸ªå¹³å° |
| è™šæ‹Ÿæœº | â­â­ | å…è´¹ | â­â­â­ | â­â­â­â­â­ | 5ä¸ªå¹³å° |

## ğŸ‰ æœ€ä½³å®è·µ

### 1. ä¸»è¦ä¾èµ–GitHub Actions
- ç”¨äºæ­£å¼å‘å¸ƒ
- è‡ªåŠ¨åŒ–ç¨‹åº¦æœ€é«˜
- æ”¯æŒæ‰€æœ‰å¹³å°

### 2. Dockerä½œä¸ºå¤‡é€‰
- æœ¬åœ°æµ‹è¯•Linuxæ„å»º
- å¿«é€ŸéªŒè¯ä¿®æ”¹

### 3. æœ¬åœ°æ„å»ºå½“å‰å¹³å°
- å¼€å‘å’Œè°ƒè¯•
- å¿«é€Ÿè¿­ä»£

## ğŸ”® æœªæ¥ä¼˜åŒ–

### 1. å‡å°‘CGOä¾èµ–
- è€ƒè™‘çº¯Goå®ç°
- æˆ–ä½¿ç”¨æ›´è½»é‡çš„Cç»‘å®š

### 2. é¢„ç¼–è¯‘ç¼“å­˜
- ç¼“å­˜æ„å»ºäº§ç‰©
- å¢é‡æ„å»ºä¼˜åŒ–

### 3. æ›´å¤šå¹³å°æ”¯æŒ
- Alpine Linux (musl)
- FreeBSD
- ARM32

## ğŸ’¡ ç«‹å³å¯ç”¨çš„è§£å†³æ–¹æ¡ˆ

**å¯¹äºä½ çš„éœ€æ±‚ï¼Œæœ€ç®€å•çš„æ–¹æ¡ˆæ˜¯**:

1. **ä½¿ç”¨GitHub Actions** (æ¨è)
   ```bash
   git push origin main  # è§¦å‘è‡ªåŠ¨æ„å»º
   # ç­‰å¾…æ„å»ºå®Œæˆï¼Œä¸‹è½½äº§ç‰©
   ```

2. **ä½¿ç”¨Dockeræ„å»ºLinux**
   ```bash
   npm run docker:build:linux
   ```

3. **ç»§ç»­ä½¿ç”¨å½“å‰å¹³å°**
   ```bash
   npm run build:platforms  # æ„å»ºmacOS ARM64
   ```

è¿™æ ·ä½ å°±å¯ä»¥è·å¾—å¤šå¹³å°çš„é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè€Œä¸éœ€è¦åœ¨æ¯ä¸ªå¹³å°ä¸Šéƒ½æœ‰ç‰©ç†æœºå™¨ï¼ğŸ‰ 