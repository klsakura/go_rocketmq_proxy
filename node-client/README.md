# RocketMQ Node.js Client ä½¿ç”¨æŒ‡å—

## ğŸ“¦ ç‹¬ç«‹å®¢æˆ·ç«¯åŒ…

è¿™æ˜¯ä¸€ä¸ª**ç‹¬ç«‹çš„**RocketMQ Node.jså®¢æˆ·ç«¯åŒ…ï¼ŒåŒ…å«äº†æ‰€æœ‰å¿…è¦çš„æ–‡ä»¶ï¼š
- âœ… å®Œæ•´çš„å®¢æˆ·ç«¯SDK (`index.js`)
- âœ… gRPCåè®®å®šä¹‰ (`rocketmq.proto`)
- âœ… ä½¿ç”¨ç¤ºä¾‹å’Œå·¥å…·

å¯ä»¥**ç‹¬ç«‹éƒ¨ç½²å’Œä½¿ç”¨**ï¼Œæ— éœ€ä¾èµ–æ•´ä¸ªRocketMQä»£ç†é¡¹ç›®ã€‚

## ğŸ“ æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒæ–‡ä»¶
- **`index.js`** - RocketMQ Node.jså®¢æˆ·ç«¯SDKä¸»æ–‡ä»¶
- **`rocketmq.proto`** - gRPCåè®®å®šä¹‰æ–‡ä»¶

### Demoç¤ºä¾‹
- **`connection-check.js`** - è¿æ¥éªŒè¯å·¥å…·
- **`performance-check.js`** - æ€§èƒ½æµ‹è¯•å·¥å…·  
- **`usage-demo.js`** - å®é™…ä½¿ç”¨ç¤ºä¾‹

---

## ğŸ” 1. è¿æ¥éªŒè¯ (`connection-check.js`)

**ç”¨é€”**: éªŒè¯RocketMQè¿æ¥å’ŒåŸºæœ¬åŠŸèƒ½æ˜¯å¦æ­£å¸¸

**ä½¿ç”¨æ–¹æ³•**:
```bash
node connection-check.js
```

**éªŒè¯å†…å®¹**:
- âœ… ä»£ç†æœåŠ¡è¿æ¥çŠ¶æ€
- âœ… ç”Ÿäº§è€…åˆ›å»º
- âœ… æ¶ˆæ¯å‘é€
- âœ… æ¶ˆè´¹è€…åˆ›å»º
- âœ… é…ç½®ä¿¡æ¯éªŒè¯

**é€‚ç”¨åœºæ™¯**: 
- é¦–æ¬¡éƒ¨ç½²æ—¶éªŒè¯ç¯å¢ƒ
- æ’æŸ¥è¿æ¥é—®é¢˜
- å¥åº·æ£€æŸ¥

---

## âš¡ 2. æ€§èƒ½éªŒè¯ (`performance-check.js`)

**ç”¨é€”**: æµ‹è¯•RocketMQåœ¨ä¸åŒè´Ÿè½½ä¸‹çš„æ€§èƒ½è¡¨ç°

**ä½¿ç”¨æ–¹æ³•**:
```bash
node performance-check.js [consumers] [messages] [batchSize]

# ç¤ºä¾‹
node performance-check.js 2 1000 50  # 2ä¸ªæ¶ˆè´¹è€…ï¼Œ1000æ¡æ¶ˆæ¯ï¼Œæ‰¹é‡å¤§å°50
```

**æµ‹è¯•æŒ‡æ ‡**:
- ğŸ“Š å‘é€QPS (æ¯ç§’æ¶ˆæ¯æ•°)
- ğŸ“Š æ¶ˆè´¹QPS 
- ğŸ“Š ç«¯åˆ°ç«¯å»¶è¿Ÿ
- ğŸ“Š å†…å­˜ä½¿ç”¨æƒ…å†µ
- ğŸ“Š è¿æ¥å¤ç”¨æ•ˆæœ

**é€‚ç”¨åœºæ™¯**:
- å®¹é‡è§„åˆ’
- æ€§èƒ½è°ƒä¼˜
- å‹åŠ›æµ‹è¯•

---

## ğŸ“š 3. å®é™…ä½¿ç”¨ç¤ºä¾‹ (`usage-demo.js`)

**ç”¨é€”**: å±•ç¤ºçœŸå®ä¸šåŠ¡åœºæ™¯ä¸‹çš„å®Œæ•´ä½¿ç”¨æ–¹æ³•

**ä½¿ç”¨æ–¹æ³•**:
```bash
# å¯åŠ¨æ¶ˆè´¹è€…
node usage-demo.js consumer

# å‘é€æ¶ˆæ¯ï¼ˆå¦å¼€ç»ˆç«¯ï¼‰
node usage-demo.js producer
```

**ä¸šåŠ¡åœºæ™¯**: ç”µå•†è®¢å•å¤„ç†æµç¨‹
- ğŸ“¦ **è®¢å•åˆ›å»º** (æ™®é€šæ¶ˆæ¯)
- ğŸ”„ **çŠ¶æ€æ›´æ–°** (é¡ºåºæ¶ˆæ¯ï¼Œä¿è¯åŒç”¨æˆ·è®¢å•é¡ºåº)
- â° **è¶…æ—¶æ£€æŸ¥** (å»¶è¿Ÿæ¶ˆæ¯ï¼Œ30åˆ†é’Ÿåæ‰§è¡Œ)

**æ¶ˆæ¯ç±»å‹å±•ç¤º**:
- âœ… æ™®é€šæ¶ˆæ¯: `publishMessage()`
- âœ… é¡ºåºæ¶ˆæ¯: `publishOrderedMessage()`  
- âœ… å»¶è¿Ÿæ¶ˆæ¯: `publishDelayMessage()`
- âœ… äº‹åŠ¡æ¶ˆæ¯: `publishTransactionMessage()`

**é€‚ç”¨åœºæ™¯**:
- å­¦ä¹ å‚è€ƒ
- ä»£ç æ¨¡æ¿
- ä¸šåŠ¡é›†æˆ

---

## âš™ï¸ é…ç½®è¯´æ˜

æ‰€æœ‰demoéƒ½ä½¿ç”¨ç»Ÿä¸€çš„é…ç½®æ ¼å¼ï¼š

```javascript
const config = {
    endpoint: 'http://rocketmq-xxx.rocketmq.volces.com:9876',
    accessKeyId: 'your-access-key',
    accessKeySecret: 'your-secret-key', 
    instanceId: 'your-instance-id',
    grpcEndpoint: 'localhost:50051'  // Goä»£ç†æœåŠ¡åœ°å€
};
```

**é‡è¦æé†’**:
- ç¡®ä¿Goä»£ç†æœåŠ¡å·²å¯åŠ¨: `./bin/rocketmq-proxy`
- Topicéœ€è¦åœ¨å­—èŠ‚è·³åŠ¨äº‘æ§åˆ¶å°é¢„å…ˆåˆ›å»º
- instanceIdç”¨äºèµ„æºéš”ç¦»ï¼Œä¸å¯çœç•¥

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

1. **å¯åŠ¨Goä»£ç†æœåŠ¡**:
```bash
cd .. && ./bin/rocketmq-proxy
```

2. **éªŒè¯è¿æ¥**:
```bash
node connection-check.js
```

3. **è¿è¡Œå®Œæ•´ç¤ºä¾‹**:
```bash
# ç»ˆç«¯1 - å¯åŠ¨æ¶ˆè´¹è€…
node usage-demo.js consumer

# ç»ˆç«¯2 - å‘é€æ¶ˆæ¯
node usage-demo.js producer
```

4. **æ€§èƒ½æµ‹è¯•**:
```bash
node performance-check.js 3 500 25
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. Goä»£ç†æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. RocketMQé…ç½®ä¿¡æ¯æ˜¯å¦æ­£ç¡®
3. ç½‘ç»œè¿æ¥æ˜¯å¦ç•…é€š
4. Topicæ˜¯å¦å·²åœ¨æ§åˆ¶å°åˆ›å»º

---

**Happy Messaging! ğŸš€** 